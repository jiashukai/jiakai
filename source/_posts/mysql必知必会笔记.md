---
title: mysql必知必会笔记
date: 2019-01-15 13:41:05
tags:
---
# chapter3  了解数据库和表

DOS命令行登录指令：mysql -u 用户名 -p   然后回撤，键入password；               
每一条mysql语句必须以“;”结束才能正确执行
选择数据库：use 数据库名；        
查看数据库的信息：show databases;返回一个数据库列表；          
查看数据库内表的列表：show tables；   
查看某一个表的表列：show columns from 表名；每一个字段返回一行，也可以使用describe 表名；来查看表的信息
查看用来创建特定数据库的mysql语句：show create database 数据库名；
查看用来创建特定表的mysql语句：show create table 表名；
# chapter4 检索数据
#### 检索单个列表
命令：select 列名 from 表名；
所需列名在select关键字后面给出，from给出从其中检索数据的表名。   
SQL语句不区分大小写，但是便于阅读和调试，对所有的关键字使用大写，所有的列名和表名都使用小写。      
在处理SQL语句时，其中所有空格都被忽略。SQL语句可以在一行上给出，也可以分成许多行。
#### 检索多个列
命令： SELECT 列名，列名，列名 FROM 表名；        
选择多个列时，要在列名中间加逗号，但最后一个列名后不加
#### 检索所有的列
命令：SELECT * FROM 表名；      
如果给定一个通配符(*),则返回列表的所有列                                  
一般除非你确实你需要表中的每个列，否则不要使用通配符，检索不需要的列通常会降低检索和应用程序的性能
#### 检索不同的行
当你检索某一个字段时，会检索这个字段的所有行，但是可能这些行中有许多相同的字段，而你只需不同的字段，这时你只需要使用 DISTINCT关键字；        
命令：SELECT DISTINCT 列名 FROM 表名；                   
DINSTINCT关键字必须放在列名的前面
不能不分使用DISTINCT  
DINSTINCT关键字应用于所有列而不仅仅是前置它的列。如果给出 SELECT DISCINCT 列名，列名 FROM 表名；除非指定的列不同，否则所有行都将被检索出来。           
也就是同时指定了两个字段，就是两个字段的字都是相同的行才会被排除在外。
#### 限制结果
SELECT语句返回所有匹配的行，他们可能是指定表中的每个行，为了返回第一行或前几行，课使用LIMIT句子：                 
命令：SELENT 列名 FROM 表名  LIMIT num；        
例：如果num=5，则返回的结果不多以5行，如果想显示后五行这可以使用：     
命令：SELECT 列名 FROM 表名 LIMIT 5,5；这样就会显示从第六行到第10行的内容；      
其中第一个数为开始检索的位置，第二个数为检索的条数。

带一个值的LIMIT总是从第一行开始，给出的数为返回的行数，带两个值的LIMIT可以指定从行号为第一个值的位置开始。

行0    检测出来的第一行为行0而不是行1，因此LIMIT 1,1，将检测出第二行而不是第一行。

行数不够时，只返回能返回的行。
#### 使用完全限定的表名
SELECT  表名.列名  from 数据库名.表名

# chapter5 排序检索数据
#### 排序数据
关系数据库设计理论认为，如果不明确规定排序顺序，则不应该假定检索出的数据的顺序有意义
为了明确地排序用SELECT语句检索出的数据，可使用 ORDER BY子句。ORDER BY 子句取一个或多个列的名字，据此对输出进行排序。                                   
命令：SELECT  列名  FROM  表名  ORDER  BY  列
####  按多个列排序
按多个列排序，只需要指定列名，列名之间用逗号分开即可：
SELECT 列名1，列名2，列名3 FROM 表名  ORDER BY 列名1，列名2；                              
检索出数据后，先按列名1排序，再按列名2排序。要注意：只有在有相同的列名1时，才对列名2进行排序
#### 指定排序方向
数据排序不限于升序（A到Z）。这只是默认的排序顺序，还可以使用ORDER BY子句以降序（Z到A）顺序排序，为了进行降序排序必须z指定DESC 关键字。                          
命令行：SELECT 列名1，列名2，列名3 FROM 表名  ORDER BY 列名1 DESC；

DESC关键字只能应用到直接位于其前面的列名，如果想在多个列之间进行排序，必须对每个列指定DESC关键字  
命令：SELECT 列名1，列名2，列名3 FROM 表名 ORDER BY 列名1 DESC，列名2 DESC；

与DESC相反的关键字是ASC，不过默认的都是升序  

ORDER  BY子句的位置
在给出ORDER BY子句时，应该保证它位于FROM子句之后，如果使用LIMIT，它必须位于ORDER BY之后。使用的次序不对将产生错误消息。   

# 过滤数据
#### 使用WHERE子句
在SELECT语句中，数据根据WHERE子句中指定的搜索条件进行过滤，WHERE子句在表名（FROM子句）之后给出：              
命令：SELECT 列名1，列名2 FROM 表名 WHERE 列名=值                
where子句的位置，在同时使用ORDER BY和WHERE子句时，应该让ORDER BY位于WHERE之后            
####WHERE子句操作符
（1）= 等于 （2）<> 不等于（3）!=  不等于（4） < 小于 （5）<= 小于等于  （6）> 大于
（7） >= 大于等于  （8） BETWEEN  在指定的两个值之间              
在编写sql语句时何时使用引号：                
如果将值与串类型的列进行比较，则需要限定限定引号。用来与数值列进行比较的值不用引号
##### 范围值查找
命令： SELECT 列名1，列名2 FROM 表名 WHERE BETWEEN 值1  AND 值2；                    
在使用BETWEEN时，必须指定两个值--所需范围的低端值和高端值。这两个值必须用AND关键字分割。BETWEEN匹配范围中所有的值，包括指定的开始值和结束值。
#####空值检查
NULL 无值，它与字段包含0，空字符串或仅仅包含空格不同。
SELECT语句有一个特殊的WHERE子句，可用来检查具有NULL值的列，这个WHERE语句就是  IS NULL          
命令：SELECT  列名1 FROM  表名 WHERE 列名2 IS NULL；
此条语句会查询出列2为NULL值的列名1的字段


NULL与不匹配

在通过过滤选择出不具有特定值的行时，你可能希望返回具有NULL值的行。但是，不行。因为未知具有特殊含义，数据库不知道他们是否匹配，所以在匹配过滤或不匹配过滤时不返回它们。

因此在过滤数据时，一定要验证返回数据中确实给出了被过滤列具有NULL的行

# 数据过滤
## 组合WHERE子句
Mysql允许给出多个WHERE子句。这些子句可以以两种方式使用：以AND子句的方式或OR子句的方式
###  AND操作符
为了通过不止一个列进行过滤，可使用AND操作符给WHERE子句附条件
命令：SELECT 列名1，列名2，列名3  FROM  表名  WHERE  列名1=值  AND 列名2<=z值;
### OR操作符
OR操作符与AND操作符不同，它指示MYSQL检索匹配任一条件的行
命令：
命令：SELECT 列名1，列名2，列名3  FROM  表名  WHERE  列名1=值  OR 列名2<=z值;
###  计算次序
WHERE可以包含任意数量的AND和OR操作符，允许两者结合以进行复杂和高级的过滤
AND在计算次序中的优先级比OR高，对于这种情况有时可以使用括号进行分组
命令：SELECT 列名1,列名2,列名3 FROM 表 WHERE （列名1=值 OR 列名2<=值）AND 列名3=值
## IN操作符
圆括号在WHERE子句中海油另外一种用法。IN操作符用来指定条件范围，范围中的每个条件都可以进行匹配。IN取的合法值是由逗号分隔的清单，全部括在圆括号中。
例如：IN操作符后面跟有  逗号  分隔的清单，整个清单必须在圆括号中
命令：SELECT 列名1，列名2，列名3 FROM 表 WHERE 字段 IN（值1，值2）ORDER  BY  列名；
使用IN操作符的优点：
（1）	在使用长的合法选项清单时，IN操作符的语法更清楚且更直观
（2）	在使用IN时，计算的次序更容易管理
（3）	IN操作符一般比OR操作符清单执行更快
（4）	IN的最大优点是可以包含其他SELECT语句，使得能够更动态地建立WHERE子句。
##NOT操作符
WHERE子句中的NOT操作符有且只有一个功能，那就是否定它之后所跟的任何条件
例：SELECT 列名1，列名2，列名3  FROM 表名 WHERE  字段1 NOT IN（值1，值2）ORDER BY 字段2；

MYSQL支持使用NOT对IN，BETWEEN和EXISTS子句取反，这与多数其他的DBMS允许使用NOT对各种条件取反有很大的差别

#用通配符进行过滤
##  LIKE操作符
通配符：用来匹配值的一部分的特殊字符
### 百分号（%）通配符
在搜索中，%表示任何字符出现任意次数
例如：SELECT 列名1，列名2，列名3 FROM 表名 WHERE 列名1  LIKE ‘jet%’;
在执行这条子句时，将检索任意以jet起头的词。%告诉MYSQL接收jet之后的任意字符，不管它有多少字符。
通配符可在搜索模式中任意位置使用，并且可以使用多个通配符。
SELECT 列名1，列名2 FROM  表名  WHERE  字段  LIKE ‘%jet%’;匹配包含’jet’的文本。
SELECT 列名1，列名2 FROM  表名  WHERE  字段  LIKE  ‘s%e’;匹配以s开头和以e结尾的文本。
尾空格可能会干扰通配符的匹配。注意 ‘%’不能匹配 NULL值
### 下划线（-）通配符
另外一个有用的通配符是下划线（-）。下划线的用途与%一样，单下划线只匹配单个字符而不是多个字符。
与%能匹配0个字符不一样，（-）总是匹配一个字符，不能多也不能少。

###通配符的几个技巧
（1）	不要过度使用通配符。如果其他操作符能达到相同的目的，应该使用其他操作符。(搜索速度慢)
（2）	在确实需要使用通配符时，除非绝对有必要，否则不要把它们用在搜索模式的额开始出。把通配符置于搜索模式的开始处，搜索起来是最慢的。
（3）	仔细注意通配符的位置。如果放错地方，可能不会反悔想要的数据。

# 用正则表达式进行搜索
##基本的字符匹配
例：SELECT 列名1 FROM 表 WHERE  列名1 REGEXP ‘1000’ORDER  BY 列名1；

LIKE与REGEXP之间的差别：
SELECT 列名1 FROM 表 WHERE  列名1  LIKE ‘1000’ORDER  BY 列名1；
SELECT 列名1 FROM 表 WHERE  列名1  REGEXP ‘1000’ORDER  BY 列名1；
执行上面的两条语句，第一条不会返回数据，而第二条语句返回一行

LIKE匹配整个列。如果被匹配的文本在列值中出现，LIKE将不会找到它，相应的行也不被返回（除非使用通配符）。而REGEXP在列值内进行匹配，如果被匹配的文本在列值中出现，REGEXP将会找到它，相应的行将被返回

### 进行OR匹配
为搜索两个串之一，使用 |
例如：SELECT 列名1，列名2 FROM 表名 WHERE 列名 REGEXP  ‘1000|2000’ ORDER BY字段;

### 匹配几个字符之一
匹配任何单一字符。如果想要匹配匹配特定字符，可通过指定一组用[]括起来的字符来完成例如：
SELECT 列名1 FROM WHERE 字段1 REGEXP ‘[123]TOM‘;
[123]意识是匹配1或2或3
集合也可以被否定，即他们将匹配除指定字符外的任何东西。
为一个否定字符集，在集合的开始处放置一个^即可。因此，尽管[123]匹配字符1,2或3；但[^123]却匹配出这些字符外的任何东西

###范围匹配
集合可用来定义要匹配的一个或多个字符  例:[123456789]
为了简化这种类型的集合，可以使用‘-‘   [1-9]
范围不限于数字  字符也是可以的  [a-z]

###匹配特殊字符
‘.‘匹配任意字符
为了匹配特殊字符，必须用\\为前导。\\-表示查找-，\\.表示查找’ . ’;

### 匹配多个实例
重复单元符：
（1）	 0个或多个匹配 （2） +  1个或多个匹配 （3）？ 0个或1个匹配
（4）{n}  指定数目的匹配 （5）{n,} 不少于指定数目的匹配  (6)（n,m）匹配数目的范围（m不超过255）
###  定位符
为了匹配特定位置的文本需要使用定位符
（1）^  文本的开始（2） $ 文本的结尾（3）[[:<:]] 词的开始（4）[[:>:]] 词的结尾

# chapter10  创建计算字段
##字段拼接
将值连接到一起构成单个值，可以利用CONCAT（）函数将两个列拼接起来；                
多数的DBMS使用+或||来实现拼接，Mysql则使用Concat（）函数来实现。
示例：SELECT CONCAT（列名1,'(',列名2，‘)’) From 表名 ORDER BY 列名；            
CONCAT（）拼接串，即把多个串连接起来形成一个较长的串，需要一个或多个指定的串，各个串之间用逗号分隔

如果要删除数据右侧的空格，则可以使用RTRIM（）函数来完成
例如：                  
命令：SELECT CONCAT（RTrim（列名1），'(',RTrim(列名2)，')'）FROM 表名;      
RTRIM（字段）去掉值右边所有的空格。去除右边的空格用Ltrim();
## 使用别名’
SQl语句中的别名用AS关键字赋予.      
命令：SELECT CONCAT（RTrim（列名1），‘（’，RTRIM（列名2），')'） AS 别名 FROM 表名；
## 执行算数计算
MYSQL算术操作表：（1）+  加（2） -  减号（3）* 乘（4）/      
命令：SELECT  列名1，列名2，列名1*列名2 AS 别名 FROM 表名 WHERE 列名1=值；         
另外SELECT Now（）利用Now（）函数返回当前日期和时间。

# 使用数据处理函数
UPPER（字段）函数将文本转换为大写              
常用的文本处理函数：            
（1）left()  返回串左边的字符  （2）Length（）  返回串的长度
（3）Locate（）找出串的一个子串 （4）Lower（）  将串转换为小写
（5）Ltrim()  去掉串左边的空格  （6）Right（）  返回串右边的字符
（7）Rtrim()  去掉串右边的空格  （8）Soundex()  返回串的SOUDEX值
（9）SubString() 返回子串的字符  （10）Upper()  将串转换为大写

其中Soundex()考虑了类的发音字符和音节，使得能对串进行发音比较而不是字符字母比较               
例如：SELECT 列名1，列名2 FROM 表名 WHERE Soundex（列名1）=Soundex（'Y Lie'）;
## 日期和时间处理函数
日期和时间采用响应的数据类型和特殊的格式存储，以便能快速和有效地排序和过滤
不过是插入或更新表值还是用WHERE子句进行过滤，日期必须为格式yyyy-mm-dd；应该总是使用4位数字的年份。

DATE(order_date)函数只是MySQL仅提取列的日期部分，当然如果只想要时间值可以使用TIME（）函数

如果先要单独的提取某年某月的数据则可以使用以下指令：               
SELECT  列名1，列名2 FROM 表名  WHERE DATE（日期字段） BETWEEN '2005-09-01' AND '2005-09-30';          
另外还可以使用：              
SELECT 列名1，列名2 FROM 表名  WHERE YEAR（日期字段）=2005 AND MONTH（日期字段）=9；
##  数值处理函数
常用的数字处理函数：
函数:(1) abs()   返回一个数的绝对值   （2）Cos（）  返回一个角度的余弦 （3）Exp（）  返回一个数的指数值      
（4）Mod（）  返回除操作的余数（5）Pi  返回圆周率  （6）Rand（）  返回一个随机数                              
（7）Sin（）  返回一个角度的正弦  （8）Sqrt()   返回一个数的平方根  （9） Tan（）  返回一个角度的正切。

# 汇总数据
      
